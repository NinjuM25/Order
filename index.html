import React, { useState, useEffect } from "react";
import firebase from "firebase/app";
import "firebase/database";

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyD1uqjXN_82NgZZc8YP82iKoEbdOBdanv4",
    authDomain: "order-management-87875.firebaseapp.com",
    projectId: "order-management-87875",
    storageBucket: "order-management-87875.firebasestorage.app",
    messagingSenderId: "879210415165",
    appId: "1:879210415165:web:b1d6808f6d790d2bbc5654",
    measurementId: "G-FPLG5R3MS6"
};

// Initialize Firebase
if (!firebase.apps.length) {
    firebase.initializeApp(firebaseConfig);
}
const database = firebase.database();

const MenuComponent = () => {
  const [selectedMenu, setSelectedMenu] = useState("");
  const [selectedOption, setSelectedOption] = useState("");
  const [menus, setMenus] = useState({});

  useEffect(() => {
    const fetchMenus = async () => {
      const snapshot = await database.ref("menus").once("value");
      if (snapshot.exists()) {
        setMenus(snapshot.val());
      } else {
        setMenus({
          "MENU 1": ["OPTION 1", "OPTION 2", "OPTION 3"],
          "MENU 2": ["OPTION 4", "OPTION 5", "OPTION 6"],
          "MENU 3": ["OPTION 7", "OPTION 8", "OPTION 9"],
        });
      }
    };
    fetchMenus();
  }, []);

  return (
    <div className="p-4 bg-gray-900 min-h-screen text-white">
      <h2 className="text-2xl mb-4">Select a Menu</h2>
      <div className="mb-4">
        {Object.keys(menus).map((menu) => (
          <button
            key={menu}
            className={`p-2 m-2 rounded bg-blue-600 hover:bg-blue-700 ${selectedMenu === menu ? "bg-green-500" : ""}`}
            onClick={() => setSelectedMenu(menu)}
          >
            {menu}
          </button>
        ))}
      </div>

      {selectedMenu && menus[selectedMenu] && (
        <div>
          <h3 className="text-xl mb-2">Select an Option</h3>
          <div>
            {menus[selectedMenu].map((option) => (
              <label key={option} className="block p-2">
                <input
                  type="radio"
                  name="options"
                  value={option}
                  checked={selectedOption === option}
                  onChange={() => setSelectedOption(option)}
                  className="mr-2"
                />
                {option}
              </label>
            ))}
          </div>
        </div>
      )}
    </div>
  );
};

export default MenuComponent;
